<<<<<<< HEAD
var Thelpers={},Tangular={};Tangular.register=function(e,r){Thelpers[e]=r},Tangular.compile=function(e){e||(e="");for(var r=-1,n=[],i=-1,s=0,t=e.length,u=0;t>r++;){var a=e.substring(r,r+2);if(-1===i)if("{{"!==a);else{if(-1!==i){u++;continue}var l=e.substring(s,r);n.push(l?'unescape("'+escape(l)+'")':'""'),i=r+2}else if("}}"===a){if(u>0){u--;continue}n.push(e.substring(i,r).trim()),s=r+2,i=-1;continue}}n.push('unescape("'+escape(e.substring(s,t))+'")'),t=n.length;for(var g="$output+=",f='var $s=this;var $output="";',o="",p=0;t>p;p++)if(p%2!==0){var c=n[p],h=!1,r=c.lastIndexOf("|"),d="helpers.encode(@)",v=null,b=c.substring(0,3);"if "===b&&(c="if( "+c.substring(3)+"){",h=!0),"foreach "===c.substring(0,8)&&(v=c.split(" "),"var"===v[1]&&v.splice(1,1),o=v[1],h=!0);var T=c.substring(0,5);if("endif"===T||"fi"===c.substring(0,2)?(c="}",h=!0):"else"===T?(c="} else {",h=!0):("end"===b||"endfor"===c.substring(0,6))&&(c="}",o="",h=!0),h)c=Tangular.append(c,o).trim();else{if(-1!==r){d=c.substring(r+1).trim(),c=c.substring(0,r),r=d.indexOf("(");var m=d;if(-1===r?d+="(@)":(m=d.substring(0,r),d=d.substring(0,r+1)+"@"+(-1===d.indexOf("()")?",":"")+d.substring(r+1)),d="helpers."+d,void 0===Thelpers[m])throw new Error('Helper: "'+m+'" not found.')}c=d.replace("@",Tangular.append(c,o).trim())}if(h){if(v){var $=Tangular.append(v[3]);c="if ("+$+"===null||"+$+"===undefined)"+$+"=[];for(var i=0,length="+$+".length;i<length;i++){var "+v[1]+"="+$+"[i];var $index=i;"}f+=c}else f+=g+c+";"}else f+=g+n[p]+";";return function(e){return new Function("helpers",f+";return $output;").call(e,Thelpers)}},Tangular.append=function(e,r){var n=[],i=e.split(" ");void 0===r&&(r="");for(var s=r.length,t=0,u=i.length;u>t;t++){var a=i[t],l=a.charCodeAt(0);if(l>64&&91>l||l>96&&123>l||36===l||95===l){var g=a.substring(0,5);if("if"===a.substring(0,2)||"endif"===g||"else"===g||"endfor"===a.substring(0,6)||"foreach"===a.substring(0,7)){n.push(a);continue}if(s>0&&a.substring(0,s)===r){n.push(a);continue}n.push("$s."+a)}else n.push(a)}return n.join(" ")},Tangular.render=function(e,r){return(void 0===r||null===r)&&(r={}),"string"==typeof e&&(e=Tangular.compile(e)),e(r)},Tangular.register("encode",function(e){return(void 0===e||null===e)&&(e=""),e.toString().replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),Tangular.register("raw",function(e){return(void 0===e||null===e)&&(e=""),e});
=======
var Thelpers={},Tangular={};Tangular.register=function(n,r){Thelpers[n]=r},Tangular.compile=function(n){n||(n="");for(var r=-1,e=[],i=-1,s=0,t=n.length,u=0;t>r++;){var a=n.substring(r,r+2);if(-1===i)if("{{"!==a);else{if(-1!==i){u++;continue}var l=n.substring(s,r);e.push(l?'unescape("'+escape(l)+'")':'""'),i=r+2}else if("}}"===a){if(u>0){u--;continue}e.push(n.substring(i,r).trim()),s=r+2,i=-1;continue}}e.push('unescape("'+escape(n.substring(s,t))+'")'),t=e.length;for(var g="$output+=",f='var $s=this;var $output="";',o=[],p=!1,c=0,h=0;t>h;h++)if(h%2!==0){var v=e[h],d=!1,r=v.lastIndexOf("|"),b="helpers.encode(@)",T=null,$=v.substring(0,3);"if "===$&&(v="if( "+v.substring(3)+"){",d=!0),"foreach "===v.substring(0,8)&&(T=v.split(" "),"var"===T[1]&&T.splice(1,1),o.push(T[1]),d=!0,p=!0,c++);var m=v.substring(0,5);if("endif"===m?(v="}",d=!0):"else"===m?(v="} else {",d=!0):("end"===$||"endfor"===v.substring(0,6))&&(v=0===o.length?"}":"}})();",o.pop(),d=!0,c--,0===c&&(p=!1)),d)v=Tangular.append(v,o,p).trim();else{if(-1!==r){b=v.substring(r+1).trim(),v=v.substring(0,r),r=b.indexOf("(");var x=b;if(-1===r?b+="(@)":(x=b.substring(0,r),b=b.substring(0,r+1)+"@"+(-1===b.indexOf("()")?",":"")+b.substring(r+1)),b="helpers."+b,void 0===Thelpers[x])throw new Error('Helper: "'+x+'" not found.')}r=b.indexOf("("),b=b.substring(0,r)+".call($s,"+b.substring(r+1),v=b.replace("@",Tangular.append(v,o,p).trim())}if(d){if(T){var w=Tangular.append(T[3],o,p);v="if ("+w+"===null||"+w+"===undefined)"+w+"=[];(function(){for(var i=0,length="+w+".length;i<length;i++){var "+T[1]+"="+w+"[i];var $index=i;"}f+=v}else f+=g+v+";"}else f+=g+e[h]+";";return function(n){return new Function("helpers",f+";return $output;").call(n,Thelpers)}},Tangular.append=function(n,r,e){var i=[],s=n.split(" ");void 0===r&&(r=[]);for(var t=r.length,u=0,a=s.length;a>u;u++){var l=s[u],g=l.charCodeAt(0);if(g>64&&91>g||g>96&&123>g||36===g||95===g||33===g){var f=l.substring(0,5);if("if"===l.substring(0,2)||"endif"===f||"else"===f||"endfor"===l.substring(0,6)||"foreach"===l.substring(0,7)){i.push(l);continue}var o="!"===l.substring(0,1),p=!1;o&&(l=l.substring(1));for(var c=0;t>c;c++){var h=r[c].length;if(l.substring(0,h)===r[c]){if(l.length!==h){var v=l.substring(h,h+1);if("."!==v&&"+"!==v)continue}p=!0;break}}if(p){i.push((o?"!":"")+l);continue}if(e&&null!==l.match(/^\$index(\s|$)/g)){i.push((o?"!":"")+l);continue}i.push((o?"!":"")+"$s."+l)}else i.push(l)}return i.join(" ")},Tangular.render=function(n,r){return(void 0===r||null===r)&&(r={}),"string"==typeof n&&(n=Tangular.compile(n)),n(r)},Tangular.register("encode",function(n){return(void 0===n||null===n)&&(n=""),n.toString().replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),Tangular.register("raw",function(n){return(void 0===n||null===n)&&(n=""),n});
>>>>>>> FETCH_HEAD
