var Thelpers={},Tangular={};Tangular.register=function(e,n){Thelpers[e]=n},Tangular.compile=function(e){e||(e="");for(var n=-1,r=[],i=-1,s=0,t=e.length,u=0;t>n++;){var a=e.substring(n,n+2);if(-1===i)if("{{"!==a);else{if(-1!==i){u++;continue}var l=e.substring(s,n);r.push(l?'unescape("'+escape(l)+'")':'""'),i=n+2}else if("}}"===a){if(u>0){u--;continue}r.push(e.substring(i,n).trim()),s=n+2,i=-1;continue}}r.push('unescape("'+escape(e.substring(s,t))+'")'),t=r.length;for(var g="$output+=",o='var $s=this;var $output="";',f="",p=0;t>p;p++)if(p%2!==0){var c=r[p],h=!1,n=c.lastIndexOf("|"),d="helpers.encode(@)",v=null,b=c.substring(0,3);"if "===b&&(c="if( "+c.substring(3)+"){",h=!0),"foreach "===c.substring(0,8)&&(v=c.split(" "),"var"===v[1]&&v.splice(1,1),f=v[1],h=!0);var T=c.substring(0,5);if("endif"===T?(c="}",h=!0):"else"===T?(c="} else {",h=!0):("end"===b||"endfor"===c.substring(0,6))&&(c="}",f="",h=!0),h)c=Tangular.append(c,f).trim();else{if(-1!==n){d=c.substring(n+1).trim(),c=c.substring(0,n),n=d.indexOf("(");var $=d;if(-1===n?d+="(@)":($=d.substring(0,n),d=d.substring(0,n+1)+"@"+(-1===d.indexOf("()")?",":"")+d.substring(n+1)),d="helpers."+d,void 0===Thelpers[$])throw new Error('Helper: "'+$+'" not found.')}c=d.replace("@",Tangular.append(c,f).trim())}if(h){if(v){var m=Tangular.append(v[3],"",!0);c="if ("+m+"===null||"+m+"===undefined)"+m+"=[];for(var i=0,length="+m+".length;i<length;i++){var "+v[1]+"="+m+"[i];var $index=i;"}o+=c}else o+=g+c+";"}else o+=g+r[p]+";";return function(e){return new Function("helpers",o+";return $output;").call(e,Thelpers)}},Tangular.append=function(e,n,r){var i=[],s=e.split(" ");void 0===n&&(n="");for(var t=n.length,u=0,a=s.length;a>u;u++){var l=s[u],g=l.charCodeAt(0);if(g>64&&91>g||g>96&&123>g||36===g||95===g){var o=l.substring(0,5);if("if"===l.substring(0,2)||"endif"===o||"else"===o||"endfor"===l.substring(0,6)||"foreach"===l.substring(0,7)){i.push(l);continue}if(t>0&&l.substring(0,t)===n){i.push(l);continue}if(r&&null!==l.match(/^\$index(\s|$)/g))continue;i.push("$s."+l)}else i.push(l)}return i.join(" ")},Tangular.render=function(e,n){return(void 0===n||null===n)&&(n={}),"string"==typeof e&&(e=Tangular.compile(e)),e(n)},Tangular.register("encode",function(e){return(void 0===e||null===e)&&(e=""),e.toString().replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),Tangular.register("raw",function(e){return(void 0===e||null===e)&&(e=""),e});