var Tangular={};Tangular.helpers={},Tangular.version="v1.6.0",Tangular.cache={},Tangular.ENCODE=/[<>&"]/g,Tangular.debug=!1,Tangular.settings={delimiters:["{{","}}"]},Tangular.register=function(n,r){return Tangular.helpers[n]=r,Tangular},Tangular.compile=function(n){n||(n="");for(var r,e=-1,a=[],t=-1,u=0,l=n.length,i=0,s=Tangular.settings.delimiters[0].length;l>e++;){var g=n.substring(e,e+s);if(-1===t)if(g!==Tangular.settings.delimiters[0]);else{if(-1!==t){i++;continue}r=n.substring(u,e),a.push(r?'unescape("'+escape(r)+'")':'""'),t=e+s}else if(g===Tangular.settings.delimiters[1]){if(i>0){i--;continue}a.push(n.substring(t,e).trim()),u=e+s,t=-1;continue}}r=n.substring(u,l),a.push(r?'unescape("'+escape(r)+'")':'""'),l=a.length;for(var o="$output+=",c='var $s=this,$output="",$t,$v;',f=[],p=!1,T=0,d=0;l>d;d++)if(d%2!==0){var h=a[d],$=!1,e=h.lastIndexOf("|"),v=null,b=h.substring(0,3);"if "===b&&(h="if( "+h.substring(3)+"){",$=!0),"foreach "===h.substring(0,8)&&(v=h.split(" "),"var"===v[1]&&v.splice(1,1),f.push(v[1]),$=!0,p=!0,T++);var m=h.substring(0,5);if("endif"===m||"fi"===h?(h="}",$=!0):"else"===m?(h="}else{",$=!0):"else if"===h.substring(0,7)?(h="}else if( "+h.substring(8)+"){",$=!0):"end"!==b&&"endfor"!==h.substring(0,6)||(h=f.length?"}})()}":"}}",f.pop(),$=!0,T--,T||(p=!1)),h=$?Tangular.append(h,f,p,"$s").trim():Tangular.helper(h,f,p,"$s"),$){if(v){var w=Tangular.append(v[3],f,p,"$s");h="if ("+w+"&&"+w+".length){(function(){for(var i=0,length="+w+".length;i<length;i++){var "+v[1]+"="+w+"[i];var $index=i;"}c+=h}else c+=o+h+";"}else c+=o+a[d]+";";var x=59===c.charCodeAt(c.length-1);return Tangular.debug&&(console.log("Tangular:"),console.log("function(helpers,$){"+c+(x?"":";")+"return $output;"),console.log(n.trim()),console.log("---------------------------"),console.log("")),function(n,r){return new Function("helpers","$",c+(x?"":";")+"return $output;").call(n,function(n){var r=Tangular.helpers[n];return r?r:(console.warn('Tangular helper "'+n+'" not found.'),function(n){return void 0===n?"undefined":null===n?"null":n.toString()})},r)}},Tangular.helper=function(n,r,e){var a,t=n.indexOf("|");if(-1===t)return a=Tangular.append(n.trim(),r,e,"$s").trim(),'helpers("encode").call($s,'+a+")";a=Tangular.append(n.substring(0,t).trim(),r,e).trim(),n=n.substring(t+1).trim().split("|");for(var u="",l=0,i=n.length;i>l;l++){var s,g=n[l].trim().replace("()","");t=g.indexOf("("),-1===t?(s=g,g=".call($s,$t)"):(s=g.substring(0,t),g=".call($s,$t,"+g.substring(t+1)),g='$t=helpers("'+s+'")'+g,u+=g+";"}return'"";$t='+a+";"+u+"$output+=$t"},Tangular.append=function(n,r,e,a){return void 0===r&&(r=[]),n?n.replace(/[\_\$a-zá-žÁ-ŽA-Z0-9\s\.\[\]]+/g,function(n,e,t){var u=t.substring(e-1,e),l=!1,i=n.trim();switch('"'!==u&&"'"!==u&&"."!==u||(l=!0),n.trim()){case"else":case"end":case"endfor":case"endif":case"fi":case"foreach":case"if":case"else if":return n;case"$index":if(!l)return n}if(!i)return"";if(l)return n;l=!1;for(var s=0,g=r.length;g>s;s++){var o=r[s].length;if(i.substring(0,o)===r[s]){if(i.length!==o){var u=i.substring(o,o+1);if("."!==u&&"+"!==u)continue}l=!0;break}}if("$"===i)return"Tangular.$wrap($)";if("$."===i.substring(0,2)&&(a="$",i=i.substring(2)),l)return i;u=i.substring(0,1);var c=u.charCodeAt(0);return c>47&&58>c?i:"Tangular.$wrap("+(a||"$s")+',"'+i+'")'}):"Tangular.$wrap("+(a||"$s")+")"},Tangular.$wrap=function(n,r,e){if(!n||!r)return n;var a=Tangular.cache[r];if(null===a)return n[r];if(a)return a(n);if(1===r.split(".").length)return Tangular.cache[r]=null,n[r];try{a=Tangular.cache[r]=new Function("XYZ","try{return XYZ."+r+'}catch(e){return ""}')}catch(t){a=new Function('return ""')}return a(n)},Tangular.render=function(n,r,e){return null==r&&(r={}),"string"==typeof n&&(n=Tangular.compile(n)),n(r,e)},Tangular.register("encode",function(n){return null==n?"":n.toString().replace(Tangular.ENCODE,function(n){switch(n){case"&":return"&amp;";case"<":return"&lt;";case">":return"&gt;";case'"':return"&quot;"}return n})}),Tangular.register("raw",function(n){return null==n?"":n}),"undefined"!=typeof global?global.Tangular=global.Ta=Tangular:"undefined"!=typeof window&&(window.Tangular||(window.Tangular=Tangular),window.Ta=Tangular);