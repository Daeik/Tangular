var Tangular={};Tangular.helpers={},Tangular.version="v1.6.0",Tangular.cache={},Tangular.ENCODE=/[<>&"]/g,Tangular.debug=!1,Tangular.settings={delimiters:["{{","}}"]},Tangular.register=function(n,r){return Tangular.helpers[n]=r,Tangular},Tangular.compile=function(n){n||(n="");for(var r,e=-1,t=[],a=-1,u=0,l=n.length,i=0,s=Tangular.settings.delimiters[0].length,g=[],o=-1;l>e++;){var c=n.substring(e,e+s);if(-1===a)if(c!==Tangular.settings.delimiters[0]);else{if(-1!==a){i++;continue}r=n.substring(u,e),r&&(o=g.indexOf(r),-1===o&&(o=g.length,g.push(r))),t.push(r?"txt["+o+"]":'""'),a=e+s}else if(c===Tangular.settings.delimiters[1]){if(i>0){i--;continue}t.push(n.substring(a,e).trim()),u=e+s,a=-1;continue}}r=n.substring(u,l),r&&(o=g.indexOf(r),-1===o&&(o=g.length,g.push(r))),t.push(r?"txt["+o+"]":'""'),l=t.length;for(var f="$output+=",p='var $s=this,$output="",$t,$v;',T=[],d=!1,h=0,$=0;l>$;$++)if($%2!==0){var v=t[$],b=!1,e=v.lastIndexOf("|"),m=null,w=v.substring(0,3);"if "===w&&(v="if( "+v.substring(3)+"){",b=!0),"foreach "===v.substring(0,8)&&(m=v.split(" "),"var"===m[1]&&m.splice(1,1),T.push(m[1]),b=!0,d=!0,h++);var x=v.substring(0,5);if("endif"===x||"fi"===v?(v="}",b=!0):"else"===x?(v="}else{",b=!0):"else if"===v.substring(0,7)?(v="}else if( "+v.substring(8)+"){",b=!0):"end"!==w&&"endfor"!==v.substring(0,6)||(v=T.length?"}})()}":"}}",T.pop(),b=!0,h--,h||(d=!1)),v=b?Tangular.append(v,T,d,"$s").trim():Tangular.helper(v,T,d,"$s"),b){if(m){var O=Tangular.append(m[3],T,d,"$s");v="if ("+O+"&&"+O+".length){(function(){for(var i=0,length="+O+".length;i<length;i++){var "+m[1]+"="+O+"[i];var $index=i;"}p+=v}else p+=f+v+";"}else p+=f+t[$]+";";var y=59===p.charCodeAt(p.length-1);return Tangular.debug&&(console.log("Tangular:"),console.log("function(helpers,$){"+p+(y?"":";")+"return $output;"),console.log(n.trim()),console.log("---------------------------"),console.log("")),function(n,r){return new Function("helpers","$","txt",p+(y?"":";")+"return $output;").call(n,function(n){var r=Tangular.helpers[n];return r?r:(console.warn('Tangular helper "'+n+'" not found.'),function(n){return void 0===n?"undefined":null===n?"null":n.toString()})},r,g)}},Tangular.helper=function(n,r,e){var t,a=n.indexOf("|");if(-1===a)return t=Tangular.append(n.trim(),r,e,"$s").trim(),'helpers("encode").call($s,'+t+")";t=Tangular.append(n.substring(0,a).trim(),r,e).trim(),n=n.substring(a+1).trim().split("|");for(var u="",l=0,i=n.length;i>l;l++){var s,g=n[l].trim().replace("()","");a=g.indexOf("("),-1===a?(s=g,g=".call($s,$t)"):(s=g.substring(0,a),g=".call($s,$t,"+g.substring(a+1)),g='$t=helpers("'+s+'")'+g,u+=g+";"}return'"";$t='+t+";"+u+"$output+=$t"},Tangular.append=function(n,r,e,t){return void 0===r&&(r=[]),n?n.replace(/[\_\$a-zá-žÁ-ŽA-Z0-9\s\.\[\]]+/g,function(n,e,a){var u=a.substring(e-1,e),l=!1,i=n.trim();switch('"'!==u&&"'"!==u&&"."!==u||(l=!0),n.trim()){case"else":case"end":case"endfor":case"endif":case"fi":case"foreach":case"if":case"else if":return n;case"$index":if(!l)return n}if(!i)return"";if(l)return n;l=!1;for(var s=0,g=r.length;g>s;s++){var o=r[s].length;if(i.substring(0,o)===r[s]){if(i.length!==o){var u=i.substring(o,o+1);if("."!==u&&"+"!==u)continue}l=!0;break}}if("$"===i)return"Tangular.$wrap($)";if("$."===i.substring(0,2)&&(t="$",i=i.substring(2)),l)return i;u=i.substring(0,1);var c=u.charCodeAt(0);return c>47&&58>c?i:"Tangular.$wrap("+(t||"$s")+',"'+i+'")'}):"Tangular.$wrap("+(t||"$s")+")"},Tangular.$wrap=function(n,r,e){if(!n||!r)return n;var t=Tangular.cache[r];if(null===t)return n[r];if(t)return t(n);if(1===r.split(".").length)return Tangular.cache[r]=null,n[r];try{t=Tangular.cache[r]=new Function("XYZ","try{return XYZ."+r+'}catch(e){return ""}')}catch(a){t=new Function('return ""')}return t(n)},Tangular.render=function(n,r,e){return null==r&&(r={}),"string"==typeof n&&(n=Tangular.compile(n)),n(r,e)},Tangular.register("encode",function(n){return null==n?"":n.toString().replace(Tangular.ENCODE,function(n){switch(n){case"&":return"&amp;";case"<":return"&lt;";case">":return"&gt;";case'"':return"&quot;"}return n})}),Tangular.register("raw",function(n){return null==n?"":n}),"undefined"!=typeof global?global.Tangular=global.Ta=Tangular:"undefined"!=typeof window&&(window.Tangular||(window.Tangular=Tangular),window.Ta=Tangular);