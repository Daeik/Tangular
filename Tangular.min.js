var Tangular={};Tangular.helpers={},Tangular.version='v1.6.0',Tangular.cache={},Tangular.ENCODE=/[<>&"]/g,Tangular.debug=!1,Tangular.settings={delimiters:['{{','}}']},Tangular.register=function(r,n){return Tangular.helpers[r]=n,Tangular},Tangular.compile=function(r){r||(r='');for(var n,e=-1,t=[],a=-1,u=0,i=r.length,l=0,s=Tangular.settings.delimiters[0].length,g=[],o=-1;i>e++;){var c=r.substring(e,e+s);if(a===-1)if(c!==Tangular.settings.delimiters[0]);else{if(a!==-1){l++;continue}n=r.substring(u,e),n&&(o=g.indexOf(n),o===-1&&(o=g.length,g.push(n))),t.push(n?'txt['+o+']':'""'),a=e+s}else if(c===Tangular.settings.delimiters[1]){if(l>0){l--;continue}t.push(r.substring(a,e).trim()),u=e+s,a=-1;continue}}n=r.substring(u,i),n&&(o=g.indexOf(n),o===-1&&(o=g.length,g.push(n))),t.push(n?'txt['+o+']':'""'),i=t.length;for(var f='$output+=',p='var $s=this,$output="",$t,$v;',h=[],T=!1,d=0,$=0;$<i;$++)if($%2!==0){var v=t[$],b=!1,e=v.lastIndexOf('|'),m=null,w=v.substring(0,3);'if '===w&&(v='if( '+v.substring(3)+'){',b=!0),'foreach '===v.substring(0,8)&&(m=v.split(' '),'var'===m[1]&&m.splice(1,1),h.push(m[1]),b=!0,T=!0,d++);var x=v.substring(0,5);if('endif'===x||'fi'===v?(v='}',b=!0):'else'===x?(v='}else{',b=!0):'else if'===v.substring(0,7)?(v='}else if( '+v.substring(8)+'){',b=!0):'end'!==w&&'endfor'!==v.substring(0,6)||(v=h.length?'}})()}':'}}',h.pop(),b=!0,d--,d||(T=!1)),v=b?Tangular.append(v,h,T,'$s').trim():Tangular.helper(v,h,T,'$s'),b){if(m){var O=Tangular.append(m[3],h,T,'$s');v='if ('+O+'&&'+O+'.length){(function(){for(var i=0,length='+O+'.length;i<length;i++){var '+m[1]+'='+O+'[i];var $index=i;'}p+=v}else p+=f+v+';'}else p+=f+t[$]+';';var C=59===p.charCodeAt(p.length-1);return Tangular.debug&&(console.log('Tangular:'),console.log('function(helpers,$){'+p+(C?'':';')+'return $output;'),console.log(r.trim()),console.log('---------------------------'),console.log('')),function(r,n){return new Function('helpers','$','txt',p+(C?'':';')+'return $output;').call(r,function(r){var n=Tangular.helpers[r];return n?n:(console.warn('Tangular helper "'+r+'" not found.'),function(r){return void 0===r?'undefined':null===r?'null':r.toString()})},n,g)}},Tangular.helper=function(r,n,e){var t,a=r.indexOf('|');if(a===-1)return t=Tangular.append(r.trim(),n,e,'$s').trim(),'helpers("encode").call($s,'+t+')';t=Tangular.append(r.substring(0,a).trim(),n,e).trim(),r=r.substring(a+1).trim().split('|');for(var u='',i=0,l=r.length;i<l;i++){var s,g=r[i].trim().replace('()','');a=g.indexOf('('),a===-1?(s=g,g='.call($s,$t)'):(s=g.substring(0,a),g='.call($s,$t,'+g.substring(a+1)),g='$t=helpers("'+s+'")'+g,u+=g+';'}return'"";$t='+t+';'+u+'$output+=$t'},Tangular.append=function(r,n,e,t){return void 0===n&&(n=[]),r?r.replace(/[\_\$a-zá-žÁ-ŽA-Z0-9\s\.\[\]]+/g,function(r,e,a){var u=a.substring(e-1,e),i=!1,l=r.trim();switch('"'!==u&&'\''!==u&&'.'!==u||(i=!0),r.trim()){case'else':case'end':case'endfor':case'endif':case'fi':case'foreach':case'if':case'else if':return r;case'$index':if(!i)return r}if(!l)return'';if(i)return r;i=!1;for(var s=0,g=n.length;s<g;s++){var o=n[s].length;if(l.substring(0,o)===n[s]){if(l.length!==o){var u=l.substring(o,o+1);if('.'!==u&&'+'!==u)continue}i=!0;break}}if('$'===l)return'Tangular.$wrap($)';if('$.'===l.substring(0,2)&&(t='$',l=l.substring(2)),i)return l;u=l.substring(0,1);var c=u.charCodeAt(0);return c>47&&c<58?l:'Tangular.$wrap('+(t||'$s')+',"'+l+'")'}):'Tangular.$wrap('+(t||'$s')+')'},Tangular.$wrap=function(r,n,e){if(!r||!n)return r;var t=Tangular.cache[n];if(null===t)return r[n];if(t)return t(r);if(1===n.split('.').length)return Tangular.cache[n]=null,r[n];try{t=Tangular.cache[n]=new Function('XYZ','try{return XYZ.'+n+'}catch(e){return ""}')}catch(r){t=new Function('return ""')}return t(r)},Tangular.render=function(r,n,e){return null==n&&(n={}),'string'==typeof r&&(r=Tangular.compile(r)),r(n,e)},Tangular.register('encode',function(r){return null==r?'':r.toString().replace(Tangular.ENCODE,function(r){switch(r){case'&':return'&amp;';case'<':return'&lt;';case'>':return'&gt;';case'"':return'&quot;'}return r})}),Tangular.register('raw',function(r){return null==r?'':r}),window.Tangular||(window.Tangular=Tangular),window.Ta=Tangular;