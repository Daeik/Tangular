var Tangular={};Tangular.helpers={},Tangular.version='v1.8.0',Tangular.cache={},Tangular.ENCODE=/[<>&"]/g,Tangular.debug=!1,Tangular.settings={delimiters:['{{','}}']},Tangular.register=function(n,r){return Tangular.helpers[n]=r,Tangular},Tangular.compile=function(n){n||(n='');for(var r,e=-1,a=[],t=-1,u=0,l=n.length,i=0,s=Tangular.settings.delimiters[0].length,g=[],o=-1;l>e++;){var f=n.substring(e,e+s);if(t===-1)if(f!==Tangular.settings.delimiters[0]);else{if(t!==-1){i++;continue}r=n.substring(u,e),r&&(o=g.indexOf(r),o===-1&&(o=g.length,g.push(r))),a.push(r?'txt['+o+']':'""'),t=e+s}else if(f===Tangular.settings.delimiters[1]){if(i>0){i--;continue}var c=n.substring(t,e).trim(),p=c.substring(0,3);if('if '===p||'for'===p||'end'===c||'fi'===c||'else'===c||'else if'===c){var h=g.length-1;g[h]=g[h].replace(/\n$/g,'')}a.push(c),u=e+s,t=-1;continue}}r=n.substring(u,l),r&&(o=g.indexOf(r),o===-1&&(o=g.length,g.push(r))),a.push(r?'txt['+o+']':'""'),l=a.length;for(var d='$output+=',T='var $s=this,$output="",$t,$v;',$=[],v=!1,b=0,m=0;m<l;m++)if(m%2!==0){var c=a[m],w=!1,e=c.lastIndexOf('|'),x=null,O=c.substring(0,3);'if '===O&&(c='if( '+c.substring(3)+'){',w=!0),'foreach '===c.substring(0,8)&&(x=c.split(' '),'var'===x[1]&&x.splice(1,1),$.push(x[1]),w=!0,v=!0,b++);var y=c.substring(0,5);if('endif'===y||'fi'===c?(c='}',w=!0):'else'===y?(c='}else{',w=!0):'else if'===c.substring(0,7)?(c='}else if( '+c.substring(8)+'){',w=!0):'end'!==O&&'endfor'!==c.substring(0,6)||(c=$.length?'}})()}':'}}',$.pop(),w=!0,b--,b||(v=!1)),c=w?Tangular.append(c,$,v,'$s').trim():Tangular.helper(c,$,v,'$s'),w){if(x){var C=Tangular.append(x[3],$,v,'$s');c='if ('+C+'&&'+C+'.length){(function(){for(var i=0,length='+C+'.length;i<length;i++){var '+x[1]+'='+C+'[i];var $index=i;'}T+=c}else T+=d+c+';'}else T+=d+a[m]+';';var E=59===T.charCodeAt(T.length-1);return Tangular.debug&&(console.log('Tangular:'),console.log('function(helpers,$){'+T+(E?'':';')+'return $output;'),console.log(n.trim()),console.log('---------------------------'),console.log('')),function(n,r){return new Function('helpers','$','txt',T+(E?'':';')+'return $output;').call(n,Tangular.helperhandling,r,g)}},Tangular.helperhandling=function(n){var r=Tangular.helpers[n];return r?r:(console.warn('Tangular helper "'+n+'" not found.'),function(n){return void 0===n?'undefined':null===n?'null':n.toString()})},Tangular.helper=function(n,r,e){var a,t=n.indexOf('|');if(t===-1)return a=Tangular.append(n.trim(),r,e,'$s').trim(),'helpers("encode").call($s,'+a+')';a=Tangular.append(n.substring(0,t).trim(),r,e).trim(),n=n.substring(t+1).trim().split('|');for(var u='',l=0,i=n.length;l<i;l++){var s,g=n[l].trim().replace('()','');t=g.indexOf('('),t===-1?(s=g,g='.call($s,$t)'):(s=g.substring(0,t),g='.call($s,$t,'+g.substring(t+1)),g='$t=helpers("'+s+'")'+g,u+=g+';'}return'"";$t='+a+';'+u+'$output+=$t'},Tangular.append=function(n,r,e,a){return void 0===r&&(r=[]),n?n.replace(/[\_\$a-zá-žÁ-ŽA-Z0-9\s\.\[\]]+/g,function(n,e,t){var u=t.substring(e-1,e),l=!1,i=n.trim();switch('"'!==u&&'\''!==u&&'.'!==u||(l=!0),n.trim()){case'else':case'end':case'endfor':case'endif':case'fi':case'foreach':case'if':case'else if':return n;case'$index':if(!l)return n}if(!i)return'';if(l)return n;l=!1;for(var s=0,g=r.length;s<g;s++){var o=r[s].length;if(i.substring(0,o)===r[s]){if(i.length!==o){var u=i.substring(o,o+1);if('.'!==u&&'+'!==u)continue}l=!0;break}}if('$'===i)return'Tangular.$wrap($)';if('$.'===i.substring(0,2)&&(a='$',i=i.substring(2)),l)return i;u=i.substring(0,1);var f=u.charCodeAt(0);return f>47&&f<58?i:'Tangular.$wrap('+(a||'$s')+',"'+i+'")'}):'Tangular.$wrap('+(a||'$s')+')'},Tangular.$wrap=function(n,r,e){if(!n||!r)return n;var a=Tangular.cache[r];if(null===a)return n[r];if(a)return a(n);if(1===r.split('.').length)return Tangular.cache[r]=null,n[r];try{a=Tangular.cache[r]=new Function('XYZ','try{return XYZ.'+r+'}catch(e){return ""}')}catch(n){a=new Function('return ""')}return a(n)},Tangular.render=function(n,r,e){return null==r&&(r={}),'string'==typeof n&&(n=Tangular.compile(n)),n(r,e)},Tangular.register('encode',function(n){return null==n?'':n.toString().replace(Tangular.ENCODE,function(n){switch(n){case'&':return'&amp;';case'<':return'&lt;';case'>':return'&gt;';case'"':return'&quot;'}return n})}),Tangular.register('raw',function(n){return null==n?'':n}),'undefined'!=typeof global?global.Tangular=global.Ta=Tangular:'undefined'!=typeof window&&(window.Tangular||(window.Tangular=Tangular),window.Ta=Tangular),'undefined'!=typeof exports&&(module.exports=Tangular);