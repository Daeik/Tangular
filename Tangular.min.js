var Tangular={};Tangular.helpers={},Tangular.version="v1.5.2",Tangular.cache={},Tangular.debug=!1,Tangular.settings={delimiters:["{{","}}"]},Tangular.register=function(r,n){return Tangular.helpers[r]=n,Tangular},Tangular.compile=function(r){r||(r="");for(var n,e=-1,a=[],t=-1,u=0,i=r.length,l=0,s=Tangular.settings.delimiters[0].length;i>e++;){var g=r.substring(e,e+s);if(-1===t)if(g!==Tangular.settings.delimiters[0]);else{if(-1!==t){l++;continue}n=r.substring(u,e),a.push(n?'unescape("'+escape(n)+'")':'""'),t=e+s}else if(g===Tangular.settings.delimiters[1]){if(l>0){l--;continue}a.push(r.substring(t,e).trim()),u=e+s,t=-1;continue}}n=r.substring(u,i),a.push(n?'unescape("'+escape(n)+'")':'""'),i=a.length;for(var o="$output+=",f='var $s=this,$output="",$t,$v;',c=[],p=!1,d=0,T=0;i>T;T++)if(T%2!==0){var h=a[T],$=!1,e=h.lastIndexOf("|"),v=null,b=h.substring(0,3);"if "===b&&(h="if( "+h.substring(3)+"){",$=!0),"foreach "===h.substring(0,8)&&(v=h.split(" "),"var"===v[1]&&v.splice(1,1),c.push(v[1]),$=!0,p=!0,d++);var m=h.substring(0,5);if("endif"===m||"fi"===h?(h="}",$=!0):"else"===m?(h="} else {",$=!0):"else if"===h.substring(0,7)?(h="}else if( "+h.substring(8)+"){",$=!0):("end"===b||"endfor"===h.substring(0,6))&&(h=c.length?"}})()}":"}}",c.pop(),$=!0,d--,0===d&&(p=!1)),h=$?Tangular.append(h,c,p,"$s").trim():Tangular.helper(h,c,p,"$s"),$){if(v){var w=Tangular.append(v[3],c,p,"$s");h="if ("+w+"&&"+w+".length){(function(){for(var i=0,length="+w+".length;i<length;i++){var "+v[1]+"="+w+"[i];var $index=i;"}f+=h}else f+=o+h+";"}else f+=o+a[T]+";";var x=59===f.charCodeAt(f.length-1);return Tangular.debug&&(console.log("Tangular:"),console.log("function(helpers,$) {"+f+(x?"":";")+"return $output;"),console.log(r.trim()),console.log("---------------------------"),console.log("")),function(r,n){return new Function("helpers","$",f+(x?"":";")+"return $output;").call(r,function(r){var n=Tangular.helpers[r];return n?n:(console.warn('Tangular helper "'+r+'" not found.'),function(r){return void 0===r?"undefined":null===r?"null":r.toString()})},n)}},Tangular.helper=function(r,n,e){var a,t=r.indexOf("|");if(-1===t)return a=Tangular.append(r.trim(),n,e,"$s").trim(),'helpers("encode").call($s,'+a+")";a=Tangular.append(r.substring(0,t).trim(),n,e).trim(),r=r.substring(t+1).trim().split("|");for(var u="",i=0,l=r.length;l>i;i++){var s,g=r[i].trim().replace("()","");t=g.indexOf("("),-1===t?(s=g,g=".call($s,$t)"):(s=g.substring(0,t),g=".call($s,$t,"+g.substring(t+1)),g='$t=helpers("'+s+'")'+g,u+=g+";"}return'"";$t='+a+";"+u+"$output+=$t"},Tangular.append=function(r,n,e,a){return void 0===n&&(n=[]),r?r.replace(/[\_\$a-zá-žÁ-ŽA-Z0-9\s\.]+/g,function(r,e,t){var u=t.substring(e-1,e),i=!1,l=r.trim();switch(('"'===u||"'"===u||"."===u)&&(i=!0),r.trim()){case"else":case"end":case"endfor":case"endif":case"fi":case"foreach":case"if":case"else if":return r;case"$index":if(!i)return r}if(""===l)return"";if(i)return r;i=!1;for(var s=0,g=n.length;g>s;s++){var o=n[s].length;if(l.substring(0,o)===n[s]){if(l.length!==o){var u=l.substring(o,o+1);if("."!==u&&"+"!==u)continue}i=!0;break}}if("$"===l)return"Tangular.$wrap($)";if("$."===l.substring(0,2)&&(a="$",l=l.substring(2)),i)return l;u=l.substring(0,1);var f=u.charCodeAt(0);return f>47&&58>f?l:"Tangular.$wrap("+(a||"$s")+',"'+l+'")'}):"Tangular.$wrap("+(a||"$s")+")"},Tangular.$wrap=function(r,n,e){if(!r)return r;if(!n)return r;var a=Tangular.cache[n];if(null===a)return r[n];if(a||(a=n.split("."),Tangular.cache[n]=1===a.length?null:a),1===a.length)return r[n];for(var t=r,u=0,i=a.length;i>u;u++){var l=a[u];if(t=t[l],!t)return u+1===i?t:e}return t},Tangular.render=function(r,n,e){return(void 0===n||null===n)&&(n={}),"string"==typeof r&&(r=Tangular.compile(r)),r(n,e)},Tangular.register("encode",function(r){return(void 0===r||null===r)&&(r=""),r.toString().replace(/[<>&"]/g,function(r){switch(r){case"&":return"&amp;";case"<":return"&lt;";case">":return"&gt;";case'"':return"&quot;"}return r})}),Tangular.register("raw",function(r){return(void 0===r||null===r)&&(r=""),r}),"undefined"!=typeof global?global.Tangular=global.Ta=Tangular:"undefined"!=typeof window&&(window.Tangular||(window.Tangular=Tangular),window.Ta=Tangular);