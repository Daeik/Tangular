var Tangular={};Tangular.helpers={},Tangular.version='v1.7.0',Tangular.cache={},Tangular.ENCODE=/[<>&"]/g,Tangular.debug=!1,Tangular.settings={delimiters:['{{','}}']},Tangular.register=function(n,r){return Tangular.helpers[n]=r,Tangular},Tangular.compile=function(n){n||(n='');for(var r,e=-1,t=[],a=-1,u=0,i=n.length,l=0,s=Tangular.settings.delimiters[0].length,g=[],o=-1;i>e++;){var c=n.substring(e,e+s);if(a===-1)if(c!==Tangular.settings.delimiters[0]);else{if(a!==-1){l++;continue}r=n.substring(u,e),r&&(o=g.indexOf(r),o===-1&&(o=g.length,g.push(r))),t.push(r?'txt['+o+']':'""'),a=e+s}else if(c===Tangular.settings.delimiters[1]){if(l>0){l--;continue}t.push(n.substring(a,e).trim()),u=e+s,a=-1;continue}}r=n.substring(u,i),r&&(o=g.indexOf(r),o===-1&&(o=g.length,g.push(r))),t.push(r?'txt['+o+']':'""'),i=t.length;for(var f='$output+=',p='var $s=this,$output="",$t,$v;',h=[],T=!1,d=0,$=0;$<i;$++)if($%2!==0){var v=t[$],b=!1,e=v.lastIndexOf('|'),m=null,w=v.substring(0,3);'if '===w&&(v='if( '+v.substring(3)+'){',b=!0),'foreach '===v.substring(0,8)&&(m=v.split(' '),'var'===m[1]&&m.splice(1,1),h.push(m[1]),b=!0,T=!0,d++);var x=v.substring(0,5);if('endif'===x||'fi'===v?(v='}',b=!0):'else'===x?(v='}else{',b=!0):'else if'===v.substring(0,7)?(v='}else if( '+v.substring(8)+'){',b=!0):'end'!==w&&'endfor'!==v.substring(0,6)||(v=h.length?'}})()}':'}}',h.pop(),b=!0,d--,d||(T=!1)),v=b?Tangular.append(v,h,T,'$s').trim():Tangular.helper(v,h,T,'$s'),b){if(m){var O=Tangular.append(m[3],h,T,'$s');v='if ('+O+'&&'+O+'.length){(function(){for(var i=0,length='+O+'.length;i<length;i++){var '+m[1]+'='+O+'[i];var $index=i;'}p+=v}else p+=f+v+';'}else p+=f+t[$]+';';var C=59===p.charCodeAt(p.length-1);return Tangular.debug&&(console.log('Tangular:'),console.log('function(helpers,$){'+p+(C?'':';')+'return $output;'),console.log(n.trim()),console.log('---------------------------'),console.log('')),function(n,r){return new Function('helpers','$','txt',p+(C?'':';')+'return $output;').call(n,Tangular.helperhandling,r,g)}},Tangular.helperhandling=function(n){var r=Tangular.helpers[n];return r?r:(console.warn('Tangular helper "'+n+'" not found.'),function(n){return void 0===n?'undefined':null===n?'null':n.toString()})},Tangular.helper=function(n,r,e){var t,a=n.indexOf('|');if(a===-1)return t=Tangular.append(n.trim(),r,e,'$s').trim(),'helpers("encode").call($s,'+t+')';t=Tangular.append(n.substring(0,a).trim(),r,e).trim(),n=n.substring(a+1).trim().split('|');for(var u='',i=0,l=n.length;i<l;i++){var s,g=n[i].trim().replace('()','');a=g.indexOf('('),a===-1?(s=g,g='.call($s,$t)'):(s=g.substring(0,a),g='.call($s,$t,'+g.substring(a+1)),g='$t=helpers("'+s+'")'+g,u+=g+';'}return'"";$t='+t+';'+u+'$output+=$t'},Tangular.append=function(n,r,e,t){return void 0===r&&(r=[]),n?n.replace(/[\_\$a-zá-žÁ-ŽA-Z0-9\s\.\[\]]+/g,function(n,e,a){var u=a.substring(e-1,e),i=!1,l=n.trim();switch('"'!==u&&'\''!==u&&'.'!==u||(i=!0),n.trim()){case'else':case'end':case'endfor':case'endif':case'fi':case'foreach':case'if':case'else if':return n;case'$index':if(!i)return n}if(!l)return'';if(i)return n;i=!1;for(var s=0,g=r.length;s<g;s++){var o=r[s].length;if(l.substring(0,o)===r[s]){if(l.length!==o){var u=l.substring(o,o+1);if('.'!==u&&'+'!==u)continue}i=!0;break}}if('$'===l)return'Tangular.$wrap($)';if('$.'===l.substring(0,2)&&(t='$',l=l.substring(2)),i)return l;u=l.substring(0,1);var c=u.charCodeAt(0);return c>47&&c<58?l:'Tangular.$wrap('+(t||'$s')+',"'+l+'")'}):'Tangular.$wrap('+(t||'$s')+')'},Tangular.$wrap=function(n,r,e){if(!n||!r)return n;var t=Tangular.cache[r];if(null===t)return n[r];if(t)return t(n);if(1===r.split('.').length)return Tangular.cache[r]=null,n[r];try{t=Tangular.cache[r]=new Function('XYZ','try{return XYZ.'+r+'}catch(e){return ""}')}catch(n){t=new Function('return ""')}return t(n)},Tangular.render=function(n,r,e){return null==r&&(r={}),'string'==typeof n&&(n=Tangular.compile(n)),n(r,e)},Tangular.register('encode',function(n){return null==n?'':n.toString().replace(Tangular.ENCODE,function(n){switch(n){case'&':return'&amp;';case'<':return'&lt;';case'>':return'&gt;';case'"':return'&quot;'}return n})}),Tangular.register('raw',function(n){return null==n?'':n}),window.Tangular||(window.Tangular=Tangular),window.Ta=Tangular;